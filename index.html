<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flash Tattoo Studio PRO</title>

<!-- FONTES DE TATUAGEM -->
<link href="https://fonts.googleapis.com/css2?family=Anton&family=Playfair+Display&family=Great+Vibes&family=Permanent+Marker&family=Cinzel&family=Special+Elite&display=swap" rel="stylesheet">

<style>
body{
margin:0;
background:#000;
font-family:Arial, sans-serif;
color:white;
}

header{
text-align:center;
padding:15px;
}

button{
background:white;
color:#1976d2;
border:none;
padding:8px 14px;
margin:4px;
border-radius:20px;
font-weight:bold;
}

/* LAYOUT PRINCIPAL */
.main{
display:flex;
flex-direction:column;
align-items:center;
}

/* CAT√ÅLOGO */
#catalog{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(80px,1fr));
gap:10px;
width:95%;
max-width:900px;
}
#catalog img{
background:white;
padding:6px;
border-radius:12px;
}

/* PAINEL TEXTO */
.panel{
background:#111;
padding:15px;
margin:15px 0;
border-radius:15px;
width:95%;
max-width:900px;
}

.panel input,.panel select{
padding:6px;
border-radius:8px;
border:none;
margin:4px;
}

.controls{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
margin-top:10px;
}

/* FOLHA */
.sheet{
width:794px;
height:1123px;
background:white;
margin:20px auto;
position:relative;
border-radius:20px;
}

.item{position:absolute;text-align:center;}
.item img{width:100%;}

.textItem{
position:absolute;
cursor:move;
color:black;
white-space:nowrap;
}

/* BOT√ïES DO TEXTO */
.textBtns{
position:absolute;
bottom:-25px;
left:0;
}
.textBtns button{
font-size:11px;
padding:2px 5px;
margin:1px;
border-radius:6px;
}

@media(max-width:820px){
.sheet{transform:scale(0.45);transform-origin:top center;}
}
</style>
</head>
<body>

<header>
<button onclick="newSheet()">Nova Folha</button>
<button onclick="organize()">Organizar</button>
<button onclick="window.print()">Imprimir</button>
</header>

<div class="main">

<h2>Cat√°logo</h2>
<div id="catalog"></div>

<div class="panel">
<h3>Texto para tatuagem</h3>

<input id="textInput" placeholder="Digite a frase">

<select id="fontSelect">
<option value="Anton">Bold Tattoo</option>
<option value="Cinzel">Romana</option>
<option value="Playfair Display">Elegante</option>
<option value="Permanent Marker">Rabiscado</option>
<option value="Great Vibes">Cursiva fina</option>
<option value="Special Elite">Old School</option>
</select>

<div class="controls">
<label>Tamanho <input type="range" id="sizeRange" min="14" max="80" value="30"></label>
<label>Curva <input type="range" id="curveRange" min="-100" max="100" value="0"></label>
<label>Espa√ßamento <input type="range" id="spacingRange" min="0" max="10" value="0"></label>
<label>Contorno <input type="range" id="outlineRange" min="0" max="5" value="0"></label>
<label>Sombra <input type="range" id="shadowRange" min="0" max="10" value="0"></label>
</div>

<button onclick="addTextToSheet()">Adicionar Texto na Folha</button>
</div>

<div id="sheets"></div>
</div>

<script>

const catalog=document.getElementById('catalog');
const sheets=document.getElementById('sheets');
let currentSheet=null;

/* CARREGAR FLASHES */
for(let i=1;i<=40;i++){
const img=document.createElement('img');
img.src='flashes/'+i+'.png';
img.onclick=()=>addFlash(img.src);
catalog.appendChild(img);
}

function newSheet(){
currentSheet=document.createElement('div');
currentSheet.className='sheet';
sheets.appendChild(currentSheet);
}
newSheet();

function getNextPosition(){
const items=currentSheet.querySelectorAll('.item');
const cols=4, margin=10;
const w=(794-margin*(cols+1))/cols;
let i=items.length;
return{ x:margin+(i%cols)*(w+margin), y:margin+Math.floor(i/cols)*(w+margin)};
}

function addFlash(src){
if(currentSheet.querySelectorAll('.item').length>=20)newSheet();
const pos=getNextPosition();
const div=document.createElement('div');
div.className='item';
div.style.left=pos.x+'px';
div.style.top=pos.y+'px';
div.style.width='120px';
div.innerHTML=`<img src="${src}"><br>
<button onclick="resize(this,10)">+</button>
<button onclick="resize(this,-10)">-</button>
<button onclick="this.parentElement.remove()">X</button>`;
currentSheet.appendChild(div);
}

function resize(btn,val){
const p=btn.parentElement;
p.style.width=(p.offsetWidth+val)+'px';
}

function organize(){
const items=currentSheet.querySelectorAll('.item');
items.forEach((it,i)=>{
const pos=getNextPosition(i);
it.style.left=pos.x+'px';
it.style.top=pos.y+'px';
});
}

/* TEXTO */
function addTextToSheet(){
const text=document.getElementById('textInput').value;
if(!text)return;
const div=document.createElement('div');
div.className='textItem';
div.dataset.text=text;
div.style.left='150px';
div.style.top='200px';
updateText(div);

const btns=document.createElement('div');
btns.className='textBtns';
btns.innerHTML=`
<button onclick="updateText(this.parentElement.parentElement)">‚Ü∫</button>
<button onclick="this.parentElement.parentElement.remove()">üóë</button>`;
div.appendChild(btns);

currentSheet.appendChild(div);
}

function updateText(div){
const size=sizeRange.value;
const font=fontSelect.value;
const spacing=spacingRange.value;
const outline=outlineRange.value;
const shadow=shadowRange.value;

div.style.fontSize=size+'px';
div.style.fontFamily=font;
div.style.letterSpacing=spacing+'px';
div.style.webkitTextStroke=outline+'px black';
div.style.textShadow=shadow>0?`2px 2px ${shadow}px rgba(0,0,0,0.5)`:'none';
div.textContent=div.dataset.text;
}
</script>

</body>
</html>
