<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flash Tattoo Studio PRO</title>

<style>
body{
margin:0;
background:#000;
font-family:Arial, sans-serif;
color:white;
text-align:center;
}

header{
padding:15px;
}

button{
background:white;
color:#1976d2;
border:none;
padding:10px 16px;
margin:5px;
border-radius:20px;
font-weight:bold;
}

#catalog{
display:flex;
flex-wrap:wrap;
justify-content:center;
gap:10px;
padding:10px;
}

#catalog img{
width:90px;
background:white;
border-radius:12px;
padding:6px;
}

.sheet{
width:794px;
height:1123px;
background:white;
margin:20px auto;
position:relative;
border-radius:20px;
}

.item{
position:absolute;
text-align:center;
}

.item img{
width:100%;
}

.textItem{
position:absolute;
cursor:move;
white-space:nowrap;
}

.textTools button{
font-size:12px;
padding:3px 6px;
margin:2px;
border-radius:6px;
}

@media(max-width:820px){
.sheet{
transform:scale(0.5);
transform-origin:top center;
}
}
</style>
</head>
<body>

<header>
<button onclick="newSheet()">Nova Folha</button>
<button onclick="organize()">Organizar</button>
<button onclick="window.print()">Imprimir</button>
</header>

<h2>Catálogo</h2>

<div id="catalog"></div>

<h3>Texto para tatuagem</h3>

<input id="textInput" placeholder="Digite a frase" style="padding:6px;border-radius:8px;border:none">

<select id="fontSelect">
<option value="Arial">Simples</option>
<option value="Georgia">Elegante</option>
<option value="Courier New">Old School</option>
<option value="Brush Script MT">Cursiva</option>
</select>

<br><br>

Tamanho <input type="range" id="sizeRange" min="14" max="80" value="30">
Curva <input type="range" id="curveRange" min="-100" max="100" value="0">
Espaçamento <input type="range" id="spacingRange" min="0" max="10" value="0">
Contorno <input type="range" id="outlineRange" min="0" max="5" value="0">
Sombra <input type="range" id="shadowRange" min="0" max="10" value="0">

<br><br>
<button onclick="addTextToSheet()">Adicionar Texto na Folha</button>

<div id="sheets"></div>

<script>

const catalog=document.getElementById('catalog');
const sheets=document.getElementById('sheets');
let currentSheet=null;

for(let i=1;i<=30;i++){
const img=document.createElement('img');
img.src='flashes/'+i+'.png';
img.onclick=()=>addFlash(img.src);
catalog.appendChild(img);
}

function newSheet(){
currentSheet=document.createElement('div');
currentSheet.className='sheet';
sheets.appendChild(currentSheet);
}

newSheet();

function getNextPosition(){
const items=currentSheet.querySelectorAll('.item');
const cols=4;
const margin=10;
const sheetWidth=currentSheet.clientWidth;
const cellW=(sheetWidth-margin*(cols+1))/cols;
const cellH=cellW*1.2;
let i=items.length;
let col=i%cols;
let row=Math.floor(i/cols);
return {x:margin+col*(cellW+margin),y:margin+row*(cellH+margin)};
}

function addFlash(src){
if(currentSheet.querySelectorAll('.item').length>=20)newSheet();
const pos=getNextPosition();
const div=document.createElement('div');
div.className='item';
div.style.left=pos.x+'px';
div.style.top=pos.y+'px';
div.style.width='120px';
div.innerHTML=`<img src="${src}"><br>
<button onclick="resize(this,10)">+</button>
<button onclick="resize(this,-10)">-</button>
<button onclick="this.parentElement.remove()">X</button>`;
currentSheet.appendChild(div);
}

function resize(btn,val){
const p=btn.parentElement;
p.style.width=(p.offsetWidth+val)+'px';
}

function organize(){
const items=currentSheet.querySelectorAll('.item');
items.forEach((it,i)=>{
const pos=getNextPosition(i);
it.style.left=pos.x+'px';
it.style.top=pos.y+'px';
});
}

function addTextToSheet(){
const text=document.getElementById('textInput').value;
if(!text)return;
const div=document.createElement('div');
div.className='textItem';
div.dataset.text=text;
div.style.left='100px';
div.style.top='100px';
updateText(div);
currentSheet.appendChild(div);
}

function updateText(div){
const size=document.getElementById('sizeRange').value;
const curve=document.getElementById('curveRange').value;
const spacing=document.getElementById('spacingRange').value;
const outline=document.getElementById('outlineRange').value;
const shadow=document.getElementById('shadowRange').value;
const font=document.getElementById('fontSelect').value;

div.innerHTML="";
div.style.fontSize=size+'px';
div.style.fontFamily=font;
div.style.letterSpacing=spacing+'px';
div.style.color='black';
div.style.textShadow=shadow>0?`2px 2px ${shadow}px rgba(0,0,0,0.4)`:'none';
div.style.webkitTextStroke=outline+'px black';
div.textContent=div.dataset.text;
}

document.querySelectorAll('input,select').forEach(el=>{
el.oninput=()=>{
const t=currentSheet.querySelector('.textItem');
if(t)updateText(t);
}
});
</script>

</body>
</html>
